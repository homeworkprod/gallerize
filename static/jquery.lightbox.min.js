(function(a){a.fn.lightbox=function(h){var t=a.extend({},a.fn.lightbox.defaults,h);return a(this).live("click",function(){e();o(this);return false});function e(){a(window).bind("orientationchange",p);a(window).bind("resize",p);a("#overlay").remove();a("#lightbox").remove();t.inprogress=false;if(t.jsonData&&t.jsonData.length>0){var A=t.jsonDataParser?t.jsonDataParser:a.fn.lightbox.parseJsonData;t.imageArray=[];t.imageArray=A(t.jsonData)}var x='<div id="outerImageContainer"><div id="imageContainer"><iframe id="lightboxIframe" /><img id="lightboxImage"><div id="hoverNav"><a href="javascript://" title="'+t.strings.prevLinkTitle+'" id="prevLink"></a><a href="javascript://" id="nextLink" title="'+t.strings.nextLinkTitle+'"></a></div><div id="loading"><a href="javascript://" id="loadingLink"><div id="jqlb_loading"></div></a></div></div></div>';var z='<div id="imageDataContainer" class="clearfix"><div id="imageData"><div id="imageDetails"><span id="caption"></span><span id="numberDisplay"></span></div><div id="bottomNav">';if(t.displayHelp){z+='<span id="helpDisplay">'+t.strings.help+"</span>"}z+='<a href="javascript://" id="bottomNavClose" title="'+t.strings.closeTitle+'"><div id="jqlb_closelabel"></div></a></div></div></div>';var y;if(t.navbarOnTop){y='<div id="overlay"></div><div id="lightbox">'+z+x+"</div>";a("body").append(y);a("#imageDataContainer").addClass("ontop")}else{y='<div id="overlay"></div><div id="lightbox">'+x+z+"</div>";a("body").append(y)}a("#overlay").click(function(){l()}).hide();a("#lightbox").click(function(){l()}).hide();a("#loadingLink").click(function(){l();return false});a("#bottomNavClose").click(function(){l();return false});a("#outerImageContainer").width(t.widthCurrent).height(t.heightCurrent);a("#imageDataContainer").width(t.widthCurrent);if(!t.imageClickClose){a("#lightboxImage").click(function(){return false});a("#hoverNav").click(function(){return false})}}function p(x){if(t.resizeTimeout){clearTimeout(t.resizeTimeout);t.resizeTimeout=false}t.resizeTimeout=setTimeout(function(){w(false)},15)}function v(){return new Array(a(document).width(),a(document).height(),a(window).width(),a(window).height())}function g(){var y,x;if(self.pageYOffset){x=self.pageYOffset;y=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){x=document.documentElement.scrollTop;y=document.documentElement.scrollLeft}else{if(document.body){x=document.body.scrollTop;y=document.body.scrollLeft}}}return new Array(y,x)}function o(A){a("select, embed, object").hide();var y=v();a("#overlay").hide().css({width:y[0]+"px",height:y[1]+"px",opacity:t.overlayOpacity}).fadeIn(200);imageNum=0;if(!t.jsonData){t.imageArray=[];if(!A.rel||(A.rel=="")){var z="";if(A.title){z=A.title}else{if(a(this).children(":first-child").attr("title")){z=a(this).children(":first-child").attr("title")}}t.imageArray.push(new Array(A.href,t.displayTitle?z:""))}else{a("a").each(function(){if(this.href&&(this.rel==A.rel)){var E="";var C="";var G="";var B=a(this);if(this.title){E=this.title}else{if(B.children("img:first-child").attr("title")){E=B.children("img:first-child").attr("title")}}if(B.parent().next(".gallery-caption").html()){var F=B.parent().next(".gallery-caption");C=F.html();G=F.text()}else{if(B.next(".wp-caption-text").html()){C=B.next(".wp-caption-text").html();G=B.next(".wp-caption-text").text()}}E=a.trim(E);G=a.trim(G);if(E.toLowerCase()==G.toLowerCase()){E=C;C=""}var D="";if(E!=""&&C!=""){D=E+"<br />"+C}else{if(E!=""){D=E}else{if(C!=""){D=C}}}t.imageArray.push(new Array(this.href,t.displayTitle?D:""))}})}}if(t.imageArray.length>1){for(i=0;i<t.imageArray.length;i++){for(j=t.imageArray.length-1;j>i;j--){if(t.imageArray[i][0]==t.imageArray[j][0]){t.imageArray.splice(j,1)}}}while(t.imageArray[imageNum][0]!=A.href){imageNum++}}var x=g();m(x[1],x[0]).show();u(imageNum)}function u(x){if(t.inprogress==false){t.inprogress=true;t.activeImage=x;a("#loading").show();a("#lightboxImage").hide();a("#hoverNav").hide();a("#prevLink").hide();a("#nextLink").hide();k()}}function k(){t.imgPreloader=new Image();t.imgPreloader.onload=function(){f();a("#lightboxImage").attr("src",t.imageArray[t.activeImage][0]);w()};t.imgPreloader.src=t.imageArray[t.activeImage][0]}function w(y){if(!t.imgPreloader){return}if(y==undefined){y=t.animate}var A=t.imgPreloader.width;var x=t.imgPreloader.height;var B=v();c();var F=B[2]-2*t.borderSize;var G=B[3]-(a("#imageDataContainer").height()+(2*t.borderSize));if(t.fitToScreen){var D=1;if(x>G){D=G/x}A=A*D;x=x*D;D=1;if(A>F){D=F/A}A=parseInt(A*D);x=parseInt(x*D)}var C=g();var z=C[1]+(G*0.5);var E=z-x*0.5;a("#lightboxImage").width(A).height(x);n(A,x,E,y)}function n(B,y,C,A){if(A==undefined){A=t.animate}t.widthCurrent=a("#outerImageContainer").outerWidth();t.heightCurrent=a("#outerImageContainer").outerHeight();var x=Math.max(350,B+(t.borderSize*2));var z=(y+(t.borderSize*2));t.xScale=(x/t.widthCurrent)*100;t.yScale=(z/t.heightCurrent)*100;wDiff=t.widthCurrent-x;hDiff=t.heightCurrent-z;m(C,null,A);if(A&&(hDiff!=0&&wDiff!=0)){a("#imageDataContainer").animate({width:x},t.resizeSpeed,"linear");a("#outerImageContainer").animate({width:x},t.resizeSpeed,"linear",function(){a("#outerImageContainer").animate({height:z},t.resizeSpeed,"linear",function(){d()})})}else{a("#imageDataContainer").width(x);a("#outerImageContainer").width(x);a("#outerImageContainer").height(z);d()}a("#prevLink").height(y);a("#nextLink").height(y)}function m(A,z,y){if(y==undefined){y=t.animate}if(z==undefined||z==null){var x=g();z=x[0]}if(y){a("#lightbox").animate({top:A},250,"linear");return a("#lightbox").animate({left:z},250,"linear")}return a("#lightbox").css({top:A+"px",left:z+"px"})}function l(){q();a("#lightbox").hide();a("#overlay").fadeOut();a("Select, object, embed").show()}function f(){if(t.loopImages&&t.imageArray.length>1){preloadNextImage=new Image();preloadNextImage.src=t.imageArray[(t.activeImage==(t.imageArray.length-1))?0:t.activeImage+1][0];preloadPrevImage=new Image();preloadPrevImage.src=t.imageArray[(t.activeImage==0)?(t.imageArray.length-1):t.activeImage-1][0]}else{if((t.imageArray.length-1)>t.activeImage){preloadNextImage=new Image();preloadNextImage.src=t.imageArray[t.activeImage+1][0]}if(t.activeImage>0){preloadPrevImage=new Image();preloadPrevImage.src=t.imageArray[t.activeImage-1][0]}}}function d(){a("#imageData").show();a("#caption").show();a("#loading").hide();if(t.animate){a("#lightboxImage").fadeIn("fast")}else{a("#lightboxImage").show()}t.inprogress=false;var x=v();a("#overlay").css({width:x[0]+"px",height:x[1]+"px"});r()}function c(){a("#numberDisplay").html("");a("#caption").html("").hide();if(t.imageArray[t.activeImage][1]){a("#caption").html(t.imageArray[t.activeImage][1]).show()}var A="";var z="";var B=(t.imageArray.length>1)?t.strings.image+(t.activeImage+1)+t.strings.of+t.imageArray.length:"";var y=(t.displayDownloadLink)?'<a href="'+t.imageArray[t.activeImage][0]+'" id="downloadLink">'+t.strings.download+"</a>":"";var x="";if(t.imageArray.length>1&&!t.disableNavbarLinks){if((t.activeImage)>0||t.loopImages){z='<a title="'+t.strings.prevLinkTitle+'" href="#" id="prevLinkText">'+t.strings.prevLinkText+"</a>"}if(((t.activeImage+1)<t.imageArray.length)||t.loopImages){x+='<a title="'+t.strings.nextLinkTitle+'" href="#" id="nextLinkText">'+t.strings.nextLinkText+"</a>"}}A=z+A+B+y+x;if(A!=""){a("#numberDisplay").html(A).show()}a("#imageData").show();r()}function r(){if(t.imageArray.length>1){a("#hoverNav").show();if(t.loopImages){a("#prevLink,#prevLinkText").show().click(function(){u((t.activeImage==0)?(t.imageArray.length-1):t.activeImage-1);return false});a("#nextLink,#nextLinkText").show().click(function(){u((t.activeImage==(t.imageArray.length-1))?0:t.activeImage+1);return false})}else{if(t.activeImage!=0){a("#prevLink,#prevLinkText").show().click(function(){u(t.activeImage-1);return false})}if(t.activeImage!=(t.imageArray.length-1)){a("#nextLink,#nextLinkText").show().click(function(){u(t.activeImage+1);return false})}}b()}}function s(A){var B=A.data.opts;var x=A.keyCode;var y=27;var z=String.fromCharCode(x).toLowerCase();if((z=="x")||(z=="o")||(z=="c")||(x==y)){l()}else{if((z=="p")||(x==37)){if(B.loopImages){q();u((B.activeImage==0)?(B.imageArray.length-1):B.activeImage-1)}else{if(B.activeImage!=0){q();u(B.activeImage-1)}}}else{if((z=="n")||(x==39)){if(t.loopImages){q();u((B.activeImage==(B.imageArray.length-1))?0:B.activeImage+1)}else{if(B.activeImage!=(B.imageArray.length-1)){q();u(B.activeImage+1)}}}}}}function b(){a(document).bind("keydown",{opts:t},s)}function q(){a(document).unbind("keydown")}};a.fn.lightbox.parseJsonData=function(c){var b=[];a.each(c,function(){b.push(new Array(this.url,this.title))});return b};a.fn.lightbox.defaults={overlayOpacity:0.8,borderSize:10,imageArray:new Array,activeImage:null,inprogress:false,widthCurrent:250,heightCurrent:250,xScale:1,yScale:1,displayTitle:true,navbarOnTop:false,displayHelp:false,disableNavbarLinks:true,loopImages:true,imageClickClose:true,jsonData:null,jsonDataParser:null,followScroll:false}})(jQuery);jQuery(document).ready(function(){if(typeof JQLBSettings=="object"&&JQLBSettings.resizeSpeed){JQLBSettings.resizeSpeed=parseInt(JQLBSettings.resizeSpeed)}var a={help:" \u2190 / P - previous image\u00a0\u00a0\u00a0\u00a0\u2192 / N - next image\u00a0\u00a0\u00a0\u00a0ESC / X - close image gallery",prevLinkTitle:"previous image",nextLinkTitle:"next image",prevLinkText:"&laquo; Previous",nextLinkText:"Next &raquo;",closeTitle:"close image gallery",image:"Image ",of:" of ",download:"Bajs"};jQuery('a[rel^="lightbox"]').lightbox({fitToScreen:(typeof JQLBSettings=="object"&&JQLBSettings.fitToScreen=="1")?true:false,resizeSpeed:(typeof JQLBSettings=="object"&&JQLBSettings.resizeSpeed>=0)?JQLBSettings.resizeSpeed:75,animate:(typeof JQLBSettings=="object"&&JQLBSettings.resizeSpeed==0)?false:true,displayDownloadLink:(typeof JQLBSettings=="object"&&JQLBSettings.displayDownloadLink=="0")?false:false,strings:(typeof JQLBSettings=="object"&&typeof JQLBSettings.help=="string")?JQLBSettings:a})});
